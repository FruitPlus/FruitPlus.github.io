---
layout: post
title: 亚马逊Kindle电子书培训（三）
category: publishing
tags:
- Kindle
- 亚马逊
- 电子书
- 培训
---
第三天的培训，美其名曰高阶内容，但是个人感觉难度不是很大。因为前期自学了一些HTML和CSS方面的知识，第三天的培训其实就是对这些知识最基本部分的复习和基础应用的实践。所谓epub或者时mobi的电子书，无非是用特殊形式封装好的html（或者xml）文件而已。对这个有了基本认识，对电子书的神秘感也就荡然无存了。
<!--more-->

高阶培训中做了两件比较重要的工作，一是老师带领大家一起看了以下Kindle电子书支持的HTML标签都有哪些，并且向前来培训的编辑们普及了这些标签的基本意义和使用方法。二是带领大家浏览了一边Amazon Kindle Publishing Guidelines这份文件。文件内容十分全面细致，英文版对于我来说没有什么障碍，但是感觉还是值得在这里简要记一下，以备日后查阅。

目前Kindle支持的电子书格式为Kindle Format 8 （KF8）。该格式替换了之前的mobi 7，添加了部分HTML5和CSS3的支持。目前KF8支持以下功能：

* 文本布局（包括行距、对齐、外边距、颜色、定义样式和边框）
* 支持段落首字下沉
* 支持包含块状文字、气泡提示、侧边栏和图片等的浮动元素，浮动元素中的文字时可以换行的
* 支持带有项目符号的有序和无序列表
* 支持技术或教材书籍所必须的嵌套表格和单元格合并
* 支持页面或文字后面有背景图片
* 支持SVG，并可以实现无损放大缩小
* 支持嵌入字体，允许出版商对书籍进行个性化处理
* 支持圆角文本框
* 支持阴影效果
* 支持带轮廓的文本
* 支持多个或重复的背景图片
* 支持颜色渐变
* 可以使用CSS选择器对文本或其他元素的属性进行精确控制
* 对特定屏幕大小支持固定布局

## 文本指南
<hr>
**Rule 1. Body的文本设置必须使用默认**

流式排版的Kindle电子书中body的文本必须都是默认的设置。亚马逊鼓励内容创造者可以对标题，特殊段落、脚注、图表等用富有创新性的样式，但绝对不是body的文本。因为对body文本的样式设置都会覆盖掉用户自选的阅读的设置，这样，用户就会报告说阅读体验差。下面是几个最为重要的点需要提请注意：
* body的文本不能有强制对齐（比如左对齐或两段对齐）
* body的文本必须用默认的字号和行距。不能用类似<pre>\<font size=“...”></pre>这样的样式标签或者在CSS中更改字号和行距。
* body的文本不能全部设置为粗体或者斜体，只能对其中的个别文字进行粗体或斜体设置。
* body的文本不能通篇用一个强制的颜色。如果你想在某个章节强制使用某种颜色，请不要用太浅或太深的颜色。非常浅的颜色在白色背景的设备或电子墨水设备上，会因为对比度不足而看不清楚。而非常深的颜色在设置为黑色背景的设备上又看不清楚。如果用灰色的话，请用hex值在#666到#999之间的颜色。
* body的文本不能用白色或黑色字体颜色。有用户报告说体验不好时因为他们把设备的背景色设置为了白色或黑色，然后相应颜色的文字就完全看不出来了。
* 用户反馈说他们拥有选择设备中提供的默认字体的选择权，这一点的体验非常好。

**Rule 2. 在分页的地方用CSS设置**

不要在需要分页的地方通过添加空白行来实现，而应该使用CSS中的page-break-before和page-break-after属性来设置。

**Rule 3. 设置段落**

KindleGen会自动为每段首行缩进。如果要改变这一设置，请为<pre>\<p></pre>使用缩进样式。比如：
* <pre><p style=“text-indent: 0”></pre> -- 首行无缩进
* <pre><p style=“text-indent: 10%”></pre> --首行缩进10%
* <pre><p style=“text-indent: 5em”></pre> --首行缩进5个字符宽度

要给每段之前添加一些间隙，在<pre><p></pre>标签上使用margin-top样式。

**Rule 4. 其他支持的编码**

只要满足以下两个条件，Kindle电子书就支持该编码：
* HTML文件中明确声明了编码
* 用于将源文件转码的电脑支持该编码并且知道如何将其转为UNICODE编码

亚马逊推荐在HTML文件中的<pre><head></pre>部分中用<pre><meta></pre>标签。例如：

<pre>
<html>
<head>
...
<meta http-equiv=“content-type” content=“text/html; charset=iso-8859-1>
...
</pre>

**Rule 5. 空格以及UNICODE字符**

仅支持正常空格字符、不可分空格字符（<pre>&nbsp;</pre>）以及零宽不连字（<pre>&zwnj;</pre>）。用其他空格会干扰选择区域、字典查词还有换行的算法。

不要使用UNICODE格式字符，它们也会造成问题。

**Rule 6. 支持等宽字符**

如果使用以下标签或者属性，Kindle可以显示为等宽字符：<pre><pre></pre>, <pre><code></pre>, <pre><samp></pre>, <pre><kbd></pre>, <pre><tt></pre>, <pre><font face=“courier”></pre>, <pre><font face=“monospace”></pre>。

除了<pre><pre></pre>标签以外，上面列出的标签都不会改变文本的对齐方式。如果要使文本左对齐的话，那么将这些标签包在一个<pre><div></pre>标签里面，然后对这个<pre><div></pre>设置text-align: left的CSS样式。

出版商可以用自己的字体。亚马逊有质量检查环节，可以确保这些字体能够在电子墨水设备上显示正常，而且不影响阅读体验。但是不要用Charis字体，在Kindle阅读器中已经用更高质量的字体替换它。



